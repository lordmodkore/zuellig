jQuery(document).ready(function(s){var t,a=s("#ssp-external-feed-progress"),o=s("#podcast_settings_tab_nonce"),n=!0;if(0<a.length){let e=a.data("progress"),r;s(".form-table").hide().prev("p").hide(),r=confirm(e?"Would you like to restore the previous import?":"You are about to import an external RSS feed."),!0===r?(function t(){s.ajax({url:ajaxurl,type:"get",data:{action:"import_external_rss_feed",nonce:o.val()},timeout:0}).done(function(e){var r;"error"!==e.status?e.is_finished?(c(),i(e.episodes),l(100,"green"),u(),p()):t():(r=e.hasOwnProperty("message")?e.message:"",f(r))}).fail(function(e){var e=e.hasOwnProperty("message")?e.message:"";f(e)})}(),n=!0,t=setInterval(d,2e3),l(e)):(p(),s(".ssp-ssp-external-feed-message").html("Import cancelled !").css("color","red"))}function l(e,r){r=r||"blue",a.progressbar({value:e}),r="blue"===(e=r)?"green":"blue",a.removeClass(r).addClass(e)}function i(e){for(var r=s("#ssp-external-feed-status"),t="",a=0;a<e.length;a++)t="<p>Imported "+e[a]+"</p>"+t;r.html(t)}function u(){s(".ssp-ssp-external-feed-message").html("Import completed successfully !").css("color","green")}function c(){n=!1,clearInterval(t)}function d(){s.ajax({url:ajaxurl,type:"get",data:{action:"get_external_rss_feed_progress",nonce:o.val()}}).done(function(e){n&&(l(e.progress,"blue"),i(e.episodes))})}function p(){s.ajax({url:ajaxurl,type:"get",data:{action:"reset_rss_feed_data",nonce:o.val()}}).done(function(e){"error"===e.status&&alert("Could not reset current feed import, please refresh this page to try again")})}function f(e=""){e=e||"An error occurred importing the RSS feed. \n\n We'll try to proceed importing after the page refresh.",alert(e)||window.location.reload()}});